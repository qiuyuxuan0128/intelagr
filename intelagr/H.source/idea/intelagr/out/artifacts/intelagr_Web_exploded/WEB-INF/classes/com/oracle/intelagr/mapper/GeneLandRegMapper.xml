<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.oracle.intelagr.mapper.GeneLandRegMapper">
	<resultMap type="GeneLandReg" id="GeneLandRegMap">
		<id column="id" property="id" />
		<result column="Year" property="year" />
		<result column="CompanyCode" property="companyCode" />
		<result column="CompanyName" property="companyName" />
		<result column="ApplyBatchNo" property="applyBatchNo" />
		<result column="Auditor" property="auditor" />
		<result column="AuditTime" property="auditTime" />
		<result column="Status" property="status" />
		<result column="Reason" property="reason" />
		<collection property="geneLandRegDlist" ofType="GeneLandRegD">
			<id column="id" property="id" />
			<result column="HID" property="hid" />
			<result column="ContractorType" property="contractorType" />
			<result column="IDType" property="idType" />
			<result column="ContractorID" property="contractorID" />
			<result column="ContractorName" property="contractorName" />
			<result column="ContractorTel" property="contractorTel" />
			<result column="CityCode" property="cityCode" />
			<result column="TownCode" property="townCode" />
			<result column="CountryCode" property="countryCode" />
			<result column="GroupName" property="groupName" />
			<result column="ArchiveAcreage" property="archiveAcreage" />
			<result column="ContractTotalYield" property="contractTotalYield" />
			<result column="RegisteredTotalYield" property="registeredTotalYield" />
			<result column="OperatorName" property="operatorName" />
			<result column="OperatorDate" property="operatorDate" />
			<result column="townName" property="townName" />
			<result column="countryName" property="countryName" />
			<result column="idName" property="idName" />
			<result column="contractorTypeName" property="contractorTypeName" />

		<collection property="geneLandDetailList" ofType="GeneLandDetail">
			<id column="id" property="id" />
			<result column="HID" property="hid" />
			<result column="LandType" property="landType" />
			<result column="ActualMu" property="actualMu" />
			<result column="MeasurementMu" property="measurementMu" />
			<result column="LandClass" property="landClass" />
			<result column="LandName" property="landName" />
			<result column="CityCode" property="cityCode" />
			<result column="TownCode" property="townCode" />
			<result column="CountryCode" property="countryCode" />
			<result column="GroupName" property="groupName" />
			<result column="landTypeName" property="landTypeName" />
			<result column="landClassName" property="landClassName" />
			</collection>
		</collection>
	</resultMap>
	<select id="select" resultMap="GeneLandRegMap" parameterType="java.util.Map">
		select * from b_generallandregh
		<where>
			<if test="userID!=null and userID!=''">
				and userID = #{userID}
			</if>
			<if test="password!=null and password!=''">
				and password = #{password}
			</if>
			<if test="userName!=null and userName!=''">
				and userName = #{userName}
			</if>
			<if test="userType!=null and userType!=''">
				and userType = #{userType}
			</if>
			and deleteFlag = 'N'
		</where>
		<if test="index!=null">
			limit #{index},#{pageSize}
		</if>
	</select>
	<select id="selectOne" resultMap="GeneLandRegMap" parameterType="java.util.Map">
		select * from b_generallandregh
		left outer join m_userrolemap ur on u.UserID=ur.UserID
		left outer join m_rolefunctionmap rf on rf.RoleCode = ur.RoleCode
		left outer join m_function f on f.FunctionCode = rf.FunctionCode
		where u.userID = #{id} and u.deleteFlag = 'N'
	</select>
</mapper>
